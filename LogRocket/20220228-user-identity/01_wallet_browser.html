<!DOCTYPE html>
<html ng-app="myApp" ng-controller="myCtrl">

  <head>
    <title>Identifying if a user has a wallet</title>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>

    
    <!--  Use the Angular library  -->
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.4.8/angular.js"></script>
    
	<script>
	/*eslint-env browser */
	var myApp = angular.module("myApp", []);
	var scope;

	myApp.controller("myCtrl", function($scope, $http) {
  		scope = $scope
		$scope.addr = []
		$score.err = ""
		$scope.isWallet = () => typeof window.ethereum !== 'undefined'
		$scope.connect = () => {
			window.ethereum.request({method: 'eth_requestAccounts'})
				.then(arr => $scope.addr = arr[0])
				.fail(err => $scope.error = err)
		}    // $scope.connect
	});
	
	</script>
	
	<body>
		<div ng-if="$err">
			<h2>Error: ${err}</h2>
		</div>
		<div ng-if="isWallet()">
			<h2 ng-if="addr.length > 0">Address: {{addr}}</h2>
			<button ng-if="addr.length == 0" ng-click="connect()">
			Connect to Ethereum
			</button>
		</div>    <!-- ng-if="isWallet()" -->
		<div ng-if="!isWallet()">
			To use this application, please install 
			<a href="https://metamask.io">MataMask</a> or
			some other Ethereum wallet.
		</div>

  	</body>
</html>
